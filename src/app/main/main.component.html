
<h3 class="text-center mt-4">Список пациентов</h3>


<div class="container pt-4">
  <div class="row d-flex justify-content-around">

    <button class="btn btn-primary" (click)="onAddPatient()">
      Добавить пациента
    </button>
  
    <div class="col-sm-4">
      <input type="text" [(ngModel)]="searchValue" class="form-control" id="search" placeholder="Введите ИИН или ФИО">
    </div>
  </div>
</div>

    <table class="table">
        <thead class="text-center thead-dark">
            <tr>
                <th>Id</th>
                <th scope="col" (click)="onAddPatient">ФИО</th>
                <th scope="col">ИИН</th>
                <th scope="col">Адрес</th>
                <th scope="col">Телефон</th>
                <th>Карточка пациента</th>
                <th>Действие</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let patient of patients | search:searchValue" class="text-center">
                <td>{{patient.patientId}}</td>
                <td>{{patient.fio}}</td>
                <td>{{patient.iin}}</td>
                <td>{{patient.address}}</td>
                <td>{{patient.phone}}</td>
                <td><button class="btn btn-primary" (click)="selectCard(patient)"><i class="fas fa-external-link-alt">Перейти</i></button></td>
                <td>
                  <button class="btn btn-danger"(click)="deletePatient(patient)"><i class="fas fa-trash-alt"></i></button>
                  <button class="btn btn-primary"(click)="onUpdatePatient(patient)"><i class="fas fa-edit"></i></button>
                </td>
            </tr>
        </tbody>
    </table>



  <ng-template #addTemplate>
    <section class="create">
      <h3>Добавить пациента:</h3>
  
      <form [formGroup]="addForm" (ngSubmit)="onSubmit()">
        
        <div class="form-group" >
          <label for="FIO">ФИО</label>
          <input type="text" class="form-control" id="FIO" name="FIO" placeholder="Введите имя" formControlName="FIO">
          <div *ngIf="FIO.touched && FIO.errors" class="errorMessage">
            <span *ngIf="FIO.hasError('required')">Нужно ввести имя-фамилию</span>
          </div>
        </div>

        <div class="form-group">
            <label for="IIN">ИИН</label>
            <input type="number" class="form-control" id="IIN" name="IIN" placeholder="Введите ИИН" formControlName="IIN">
            <div *ngIf="IIN.touched && IIN.errors" class="errorMessage">
              <span *ngIf="IIN.hasError('required')">ИИН обязателен</span>
              <span *ngIf="IIN.hasError('maxLength')">ИИН должен содержать 12 цифр</span>
              <span *ngIf="IIN.hasError('minLength')">ИИН должен содержать 12 цифр</span>
            </div>
        </div>

        <div class="form-group">
            <label for="Address">Адрес:</label>
            <input type="text" class="form-control" id="Address" name="Address" placeholder="Введите свой адрес" formControlName="Address">
            <div *ngIf="Address.touched && Address.errors" class="errorMessage">
              <span *ngIf="Address.hasError('required')">Адрес обязателен</span>
            </div>
        </div>

        <div class="form-group">
            <label for="Phone">Телефон:</label>
            <input type="text" class="form-control" id="Phone" name="Phone" placeholder="Введите свой телефон" formControlName="Phone">
            <div *ngIf="Phone.touched && Phone.errors" class="errorMessage">
              <span *ngIf="Phone.hasError('required')">Телефон обязателен</span>
            </div>
        </div>
  
        <div class="row">
          <div class="offset-md-5 col-md-2">
            <button type="button" class="btn btn-primary" (click)="onSubmit()">Добавить</button>
          </div>
        </div>
      </form>
      
    </section>
  </ng-template> 
  
  
  <ng-template #updateTemplate>
    <section class="create">
      <h3>Обновить данные о пациенте:</h3>
  
      <form [formGroup]="updateForm" (ngSubmit)="updatePatient()">
        
        <div class="form-group" >
          <label for="FIO">ФИО</label>
          <input type="text" class="form-control" id="FIO" name="FIO" placeholder="Введите имя" formControlName="FIO">
          <div *ngIf="FIO.touched && FIO.errors" class="errorMessage">
            <span *ngIf="FIO.hasError('required')">Нужно ввести имя-фамилию</span>
          </div>
        </div>

        <div class="form-group">
            <label for="IIN">ИИН</label>
            <input type="number" class="form-control" id="IIN" name="IIN" placeholder="Введите ИИН" formControlName="IIN">
            <div *ngIf="IIN.touched && IIN.errors" class="errorMessage">
              <span *ngIf="IIN.hasError('required')">ИИН обязателен</span>
              <span *ngIf="IIN.hasError('maxLength')">ИИН должен содержать 12 цифр</span>
              <span *ngIf="IIN.hasError('minLength')">ИИН должен содержать 12 цифр</span>
            </div>
        </div>

        <div class="form-group">
            <label for="Address">Адрес:</label>
            <input type="text" class="form-control" id="Address" name="Address" placeholder="Введите свой адрес" formControlName="Address">
            <div *ngIf="Address.touched && Address.errors" class="errorMessage">
              <span *ngIf="Address.hasError('required')">Адрес обязателен</span>
            </div>
        </div>

        <div class="form-group">
            <label for="Phone">Телефон:</label>
            <input type="text" class="form-control" id="Phone" name="Phone" placeholder="Введите свой телефон" formControlName="Phone">
            <div *ngIf="Phone.touched && Phone.errors" class="errorMessage">
              <span *ngIf="Phone.hasError('required')">Телефон обязателен</span>
            </div>
        </div>
  
        <div class="row">
          <div class="offset-md-5 col-md-2">
            <button type="button" class="btn btn-primary" (click)="updatePatient()">Добавить</button>
          </div>
        </div>
      </form>
      
    </section>
  </ng-template>  


